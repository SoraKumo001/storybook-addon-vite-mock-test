{"version":3,"file":"MockTest.stories-NFAxXgrO.js","sources":["../../stories/MockTest/MockTest.tsx","../../stories/MockTest/MockTest.stories.tsx"],"sourcesContent":["import React, { FC, useMemo, useState } from \"react\";\ninterface Props {}\n\n/**\n * MockTest\n *\n * @param {Props} { }\n */\nexport const MockTest: FC<Props> = ({}) => {\n  const [, reload] = useState({});\n  const value = useMemo(() => {\n    return \"Before\";\n  }, []);\n  return (\n    <div>\n      <button onClick={() => reload({})}>{value}</button>\n    </div>\n  );\n};\n","import { Meta, StoryObj } from \"@storybook/nextjs-vite\";\nimport { DependencyList, useMemo } from \"react\";\nimport { expect, userEvent, waitFor, within } from \"storybook/test\";\nimport { createMock, getMock, getOriginal } from \"storybook-addon-vite-mock\";\nimport { MockTest } from \"./MockTest\";\n\nconst meta: Meta<typeof MockTest> = {\n  component: MockTest,\n};\nexport default meta;\n\nexport const Primary: StoryObj<typeof MockTest> = {\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n    expect(canvas.getByText(\"Before\")).toBeInTheDocument();\n  },\n};\n\nexport const Mock: StoryObj<typeof MockTest> = {\n  parameters: {\n    moduleMock: {\n      mock: () => {\n        const mock = createMock(useMemo);\n        mock.mockImplementation((fn: () => unknown, deps: DependencyList) => {\n          const value = getOriginal(useMemo)(fn, deps);\n          return value === \"Before\" ? \"After\" : value;\n        });\n        return [mock];\n      },\n    },\n  },\n  play: async ({ canvasElement, parameters }) => {\n    const canvas = within(canvasElement);\n    expect(canvas.getByText(\"After\")).toBeInTheDocument();\n    const mock = getMock(parameters, useMemo);\n    expect(mock).toBeCalled();\n  },\n};\n\nexport const Action: StoryObj<typeof MockTest> = {\n  parameters: {\n    moduleMock: {\n      mock: () => {\n        const mock = createMock(useMemo);\n        mock.mockImplementation(getOriginal(useMemo));\n        return [mock];\n      },\n    },\n  },\n  play: async ({ canvasElement, parameters }) => {\n    const canvas = within(canvasElement);\n    const mock = getMock(parameters, useMemo);\n    mock.mockImplementation((fn: () => unknown, deps: DependencyList) => {\n      const value = getOriginal(useMemo)(fn, deps);\n      return value === \"Before\" ? \"Action\" : value;\n    });\n    userEvent.click(await canvas.findByRole(\"button\"));\n    await waitFor(() => {\n      expect(canvas.getByText(\"Action\")).toBeInTheDocument();\n    });\n  },\n};\n"],"names":["cov_1bjf22a8zc","MockTest","reload","value","useMemo","s","_jsx","expect","userEvent","waitFor","within","component","canvasElement","play","canvas","getByText","toBeInTheDocument","Mock","moduleMock","mock","mockImplementation","getOriginal","DependencyList","fn","parameters","getMock","toBeCalled","Action","createMock","deps","findByRole"],"mappings":"8/DAQOA,IAAMC,EAAAA,CAAAA,IAAiBD,MAAAA,EAAA,CAAA,CAAA,IAAA,CAC5BA,EAASE,EAAM,EAAA,CAAAF,IACf,KAAMG,CAAAA,CAAAA,CAAAH,GAAAA,IAAA,EAAA,CAAQI,IAAAA,WAAY,CAAA,CAAA,GAAAJ,GAAAA,IAAA,EAAA,CAAA,IAAAI,EAAAA,QAAA,KAAAJ,EAAA,EAAAK,EAAA,CAAA,IACxBL,EAAO,EAAA,EAAA,CAAA,IACJ,UAAAA,CAAAA,CAAAA,GACL,OAAAA,EAAA,EAAA,EAAA,CAAA,IAEIM,EAAAA,UAAC,UAAoBA,EAAAA,IAAA,SAAA,CAAAN,QAAAA,KAAAA,EAAA,EAAAK,EAAA,CAAA,IAAAL,EAAS,EAAE,EAAA,CAAA,IAAAE,EAAA,CAAA,CAAA,GAAI,SAAAC,GAG1C,CAAA,CAAAH;;uDChBA,KAAA,CAAA,OAAAO,EAASA,UAAAA,EAAQC,QAAAA,EAAWC,OAAAA,CAASC,EAAAA,0BAKnCC,EAAWV,CACZU,UAAAV,CACD,EAGiBW,EAAAA,CAAcC,KAAM,MAAA,CAAAD,cAAAA,KAAA,CACjC,MAAME,EAASJ,EAAOE,CAAa,EACnCL,EAAOO,EAAOC,UAAU,QAAQ,CAAC,EAAEC,kBAAAA,CACrC,CACF,EAGYC,EAAE,CACVC,WAAU,YACF,CACJC,KAAAA,IAAA,CACAA,MAAKC,EAAAA,EAAmBhB,SAAK,WAC3BgB,mBAAcC,CAAAA,EAAYjB,IAAkBkB,CAC5C,MAAAnB,EAAYkB,EAAajB,EAAAA,OAAG,EAAOmB,EAAGpB,CAAK,EAC3C,OAAAA,IAAA,SAAA,QAAAA,CACF,CAAA,EACF,CAAAgB,CAAAA,CACF,CAAA,CACD,OACcP,MAAAA,CAAaA,cAAAA,EAAAY,WAAAA,KAAA,CAAEA,MAAAA,EAAAA,EAAAA,CAAAA,EAAYjB,EAAKO,EAAAC,UAAA,OAAA,CAAA,EAAAC,kBAAAA,EAC7C,MAAMF,EAAMW,EAASD,WAAe,EACpCjB,EAAOO,CAAAA,EAAMY,WAAAA,CACb,CACAnB,EAEHoB,EAAA,CAEDH,YACEA,WAAY,CACVN,KAAAA,IAAAA,CACEC,MAAMA,EAAMS,EAAAxB,SAAA,EACVe,OAAAA,EAAAC,mBAAwBhB,EAAQA,EAAAA,OAAA,CAAA,EAC3BgB,CAAAA,CAAAA,GAEP,EAEJP,KAAC,MAAA,CAAAD,cAAAA,EAAAY,WAAAA,KAAA,CACDX,QAAaH,EAAAE,CAAA,EAAea,EAAAD,EAAApB,SAAA,EAAEoB,mBAAAA,CAAAA,EAAAA,IAAAA,CAAY,MAAKrB,EAAAkB,EAAAjB,EAAAA,OAAA,EAAAmB,EAAAM,CAAA,EAC7C,OAAMf,IAASJ,kBAAqBP,CACpC,CAAA,EACAgB,EAAKC,MAAAA,MAAAA,EAAwBU,WAAM,QAAa,CAAA,QAC9CrB,EAAW,IAAA,CACXF,EAAOJ,EAAKY,UAAK,QAAW,CAAA,EAAAC,kBAAAA,CAC9B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}