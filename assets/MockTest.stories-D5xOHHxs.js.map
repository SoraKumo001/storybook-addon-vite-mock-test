{"version":3,"file":"MockTest.stories-D5xOHHxs.js","sources":["../../stories/MockTest/MockTest.tsx","../../stories/MockTest/MockTest.stories.tsx"],"sourcesContent":["import React, { FC, useMemo, useState } from \"react\";\ninterface Props {}\n\n/**\n * MockTest\n *\n * @param {Props} { }\n */\nexport const MockTest: FC<Props> = ({}) => {\n  const [, reload] = useState({});\n  const value = useMemo(() => {\n    return \"Before\";\n  }, []);\n  return (\n    <div>\n      <button onClick={() => reload({})}>{value}</button>\n    </div>\n  );\n};\n","import { Meta, StoryObj } from \"@storybook/nextjs-vite\";\nimport { DependencyList, useMemo } from \"react\";\nimport { expect, userEvent, waitFor, within } from \"storybook/test\";\nimport { createMock, getMock, getOriginal } from \"storybook-addon-vite-mock\";\nimport { MockTest } from \"./MockTest\";\n\nconst meta: Meta<typeof MockTest> = {\n  component: MockTest,\n};\nexport default meta;\n\nexport const Primary: StoryObj<typeof MockTest> = {\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n    expect(canvas.getByText(\"Before\")).toBeInTheDocument();\n  },\n};\n\nexport const Mock: StoryObj<typeof MockTest> = {\n  parameters: {\n    moduleMock: {\n      mock: () => {\n        const mock = createMock(useMemo);\n        mock.mockImplementation((fn: () => unknown, deps: DependencyList) => {\n          const value = getOriginal(useMemo)(fn, deps);\n          return value === \"Before\" ? \"After\" : value;\n        });\n        return [mock];\n      },\n    },\n  },\n  play: async ({ canvasElement, parameters }) => {\n    const canvas = within(canvasElement);\n    expect(canvas.getByText(\"After\")).toBeInTheDocument();\n    const mock = getMock(parameters, useMemo);\n    expect(mock).toBeCalled();\n  },\n};\n\nexport const Action: StoryObj<typeof MockTest> = {\n  parameters: {\n    moduleMock: {\n      mock: () => {\n        const mock = createMock(useMemo);\n        mock.mockImplementation(getOriginal(useMemo));\n        return [mock];\n      },\n    },\n  },\n  play: async ({ canvasElement, parameters }) => {\n    const canvas = within(canvasElement);\n    const mock = getMock(parameters, useMemo);\n    mock.mockImplementation((fn: () => unknown, deps: DependencyList) => {\n      const value = getOriginal(useMemo)(fn, deps);\n      return value === \"Before\" ? \"Action\" : value;\n    });\n    userEvent.click(await canvas.findByRole(\"button\"));\n    await waitFor(() => {\n      expect(canvas.getByText(\"Action\")).toBeInTheDocument();\n    });\n  },\n};\n"],"names":["MockTest","reload","cov_1bjf22a8zc","s","useState","value","useMemo","f","expect","waitFor","component","canvasElement","play","canvas","within","getByText","toBeInTheDocument","Mock","moduleMock","mock","mockImplementation","getOriginal","DependencyList","fn","deps","parameters","getMock","toBeCalled","Action","createMock","findByRole"],"mappings":"g+DAeM,MAAAA,eAAO,CAAA,IAAA,KAAU,CAAA,CAAAC,CAAA,GAAAC,EAAA,EAAAC,EAAIC,CAAAA,IAAAA,WAAW,CAAA,CAAA,GAAIC,GAAAH,EAAA,EAAAC,EAAA,CAAA,IAAAG,UAAA,KAAAJ,EAAA,EAAAK,EAAAL,CAAAA,IAAAA,EAAA,EAAAC,EAAA,CAAA,IAAA,4BAG1C,CAAA;;uDChBA,KAASK,CAAAA,OAAAA,EAAAA,UAAAA,EAAmBC,QAAAA,EAAAA,OAAAA,CAAuB,EAAA,0BAKjDC,EAAWV,CACZU,UAAAV,CACD,EAGiBW,EAAAA,CAAcC,KAAM,MAAA,CAAAD,cAAAA,KAAA,CAC3BE,MAAAA,EAASC,EAAOH,CAAa,EACnCH,EAAOK,EAAOE,UAAU,QAAQ,CAAC,EAAEC,kBAAkB,CAAA,CAEzD,EAGcC,EAAA,CACVC,WAAU,YACI,CACVC,KAAAA,IAAU,CACLC,MAAAA,EAAAA,EAAmBd,SAAQ,EACxBD,OAAAA,EAAAA,mBAAQgB,CAAAA,EAAYf,IAAkBgB,CAC5C,MAAAjB,EAAiBgB,EAAWf,EAAA,OAAA,EAAOiB,EAAQC,CAAA,EAC3CnB,OAAAA,IAAA,SAAA,QAAAA,CAAAA,CACK,EACT,CAAAc,CAAA,CAAA,CACF,CAEFP,OAA4B,MAAA,CAAAD,cAAAA,EAAAc,WAAAA,KAAA,CAAEA,MAAAA,EAAAA,EAAAA,CAAAA,EAAiBjB,EAAAK,EAAAE,UAAA,OAAA,CAAA,EAAAC,kBAAA,EACvCH,MAAAA,EAAMa,EAASD,WAAe,EAC7BZ,EAAAA,CAAM,EAAAc,WAAW,CAAA,CAExBnB,EAEHoB,EAAA,CAEDH,YACEA,WAAY,CACVP,KAAAA,IAAY,CACEC,MAAAA,EAAAU,EAAAvB,SAAA,EACVc,OAAAA,EAAAA,mBAAwBd,EAAQA,EAAAA,OAAA,CAAA,EACT,CAAAa,CAAA,CAAA,EAG3B,EACFP,KAAC,MAAA,CAAAD,cAAAA,EAAAc,WAAAA,KAAA,SACYX,EAAAH,CAAA,EAAee,EAAAD,EAAAnB,SAAA,EAAEmB,mBAAAA,CAAAA,EAAAA,IAAAA,CAAiB,MAAApB,EAAAgB,EAAAf,EAAA,OAAA,EAAAiB,EAAAC,CAAA,EACjCnB,OAAAA,IAAS,kBAAeA,CAAAA,CACpC,EACAc,EAAKC,MAAAA,MAAAA,EAAwBU,WAAa,QAAM,CAAA,QACxCzB,EAAQgB,IAAAA,CACdb,EAAOH,EAAUU,UAAA,QAAW,CAAA,EAAAC,kBAAgB,CAAA,CAC7C,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}