{"version":3,"file":"preload-helper-DlceIuYc.js","sources":["../../virtual:___mock.js"],"sourcesContent":["const setGlobalFunction = (func) => {\n    Object.entries(func).forEach(([key, value]) => {\n        globalThis[key] = value;\n    });\n};\nconst createFunction = (key, original) => {\n    if (Object.getOwnPropertyDescriptor(original, 'prototype') &&\n        Object.getOwnPropertyDescriptor(original, 'name')?.value !== '')\n        return original;\n    const ___symbol = Symbol(key);\n    const func = (...params) => {\n        const f = funcMap[___symbol].custom;\n        return f(...params);\n    };\n    Object.defineProperty(func, '___symbol', { value: ___symbol });\n    funcMap[___symbol] = { original, custom: original };\n    Object.entries(original).forEach(([k, v]) => {\n        func[k] = v;\n    });\n    Object.defineProperty(func, 'name', { value: key });\n    return func;\n};\nconst getSymbol = (func) => {\n    return Object.getOwnPropertyDescriptor(func, '___symbol')?.value;\n};\nconst funcMap = {};\nconst ___setMock = (func, custom) => {\n    const key = getSymbol(func);\n    if (!key)\n        throw new Error(`Function is not a mock '${func.name}'`);\n    funcMap[key] = { ...funcMap[key], custom };\n    return funcMap[key].original;\n};\nconst ___getOriginal = (func) => {\n    const key = getSymbol(func);\n    if (!key)\n        throw new Error(`Function is not a mock '${func.name}'`);\n    return funcMap[key].original;\n};\nconst ___createMock = (exp) => {\n    const v = Object.entries(exp).map(([key, original]) => {\n        if (typeof original === 'function' && !getSymbol(original)) {\n            const func = createFunction(key, original);\n            return [key, func];\n        }\n        return [key, original];\n    });\n    return Object.fromEntries(v);\n};\nconst ___createCommonMock = (exp) => {\n    if (typeof exp !== 'object')\n        return exp;\n    if (typeof exp === 'function') {\n        const func = createFunction(exp.name, exp);\n        Object.setPrototypeOf(func, Object.getPrototypeOf(exp));\n        const prototype = Object.getPrototypeOf(exp);\n        const clonedObject = Object.create(prototype);\n        return Object.assign(clonedObject, exp);\n    }\n    Object.entries(exp).forEach(([key, original]) => {\n        if (typeof original === 'function' && !getSymbol(original)) {\n            if (!original.prototype || Object.keys(original.prototype).length === 0) {\n                const func = createFunction(key, original);\n                try {\n                    exp[key] = func;\n                }\n                catch { }\n            }\n        }\n    });\n    return exp;\n};\nsetGlobalFunction({\n    ___setMock,\n    ___createMock,\n    ___createCommonMock,\n    ___getOriginal,\n});\nexport {};\n"],"names":["setGlobalFunction","func","key","value","createFunction","original","___symbol","params","f","funcMap","k","v","getSymbol","___setMock","custom","___getOriginal","___createMock","exp","___createCommonMock","prototype","clonedObject"],"mappings":"AAAA,MAAMA,EAAqBC,GAAO,CAC9B,OAAO,QAAQA,CAAI,EAAE,QAAQ,CAAC,CAACC,EAAKC,CAAK,IAAI,CACzC,WAAWD,CAAG,EAAIC,CACtB,CAAC,CACL,EACMC,EAAiB,CAACF,EAAKG,IAAW,CACpC,GAAI,OAAO,yBAAyBA,EAAU,WAAW,GACrD,OAAO,yBAAyBA,EAAU,MAAM,GAAG,QAAU,GAC7D,OAAOA,EACX,MAAMC,EAAY,OAAOJ,CAAG,EACtBD,EAAO,IAAIM,IAAS,CACtB,MAAMC,EAAIC,EAAQH,CAAS,EAAE,OAC7B,OAAOE,EAAE,GAAGD,CAAM,CACtB,EACA,cAAO,eAAeN,EAAM,YAAa,CAAE,MAAOK,CAAU,CAAC,EAC7DG,EAAQH,CAAS,EAAI,CAAE,SAAAD,EAAU,OAAQA,GACzC,OAAO,QAAQA,CAAQ,EAAE,QAAQ,CAAC,CAACK,EAAGC,CAAC,IAAI,CACvCV,EAAKS,CAAC,EAAIC,CACd,CAAC,EACD,OAAO,eAAeV,EAAM,OAAQ,CAAE,MAAOC,CAAI,CAAC,EAC3CD,CACX,EACMW,EAAaX,GACR,OAAO,yBAAyBA,EAAM,WAAW,GAAG,MAEzDQ,EAAU,CAAA,EACVI,EAAa,CAACZ,EAAMa,IAAS,CAC/B,MAAMZ,EAAMU,EAAUX,CAAI,EAC1B,GAAI,CAACC,EACD,MAAM,IAAI,MAAM,2BAA2BD,EAAK,IAAI,GAAG,EAC3D,OAAAQ,EAAQP,CAAG,EAAI,CAAE,GAAGO,EAAQP,CAAG,EAAG,OAAAY,GAC3BL,EAAQP,CAAG,EAAE,QACxB,EACMa,EAAkBd,GAAO,CAC3B,MAAMC,EAAMU,EAAUX,CAAI,EAC1B,GAAI,CAACC,EACD,MAAM,IAAI,MAAM,2BAA2BD,EAAK,IAAI,GAAG,EAC3D,OAAOQ,EAAQP,CAAG,EAAE,QACxB,EACMc,EAAiBC,GAAM,CACzB,MAAMN,EAAI,OAAO,QAAQM,CAAG,EAAE,IAAI,CAAC,CAACf,EAAKG,CAAQ,IAAI,CACjD,GAAI,OAAOA,GAAa,YAAc,CAACO,EAAUP,CAAQ,EAAG,CACxD,MAAMJ,EAAOG,EAAeF,EAAKG,CAAQ,EACzC,MAAO,CAACH,EAAKD,CAAK,CACtB,CACA,MAAO,CAACC,EAAKG,CAAS,CAC1B,CAAC,EACD,OAAO,OAAO,YAAYM,CAAC,CAC/B,EACMO,EAAuBD,GAAM,CAC/B,GAAI,OAAOA,GAAQ,SACf,OAAOA,EACX,GAAI,OAAOA,GAAQ,WAAY,CAC3B,MAAMhB,EAAOG,EAAea,EAAI,KAAMA,CAAG,EACzC,OAAO,eAAehB,EAAM,OAAO,eAAegB,CAAG,CAAC,EACtD,MAAME,EAAY,OAAO,eAAeF,CAAG,EACrCG,EAAe,OAAO,OAAOD,CAAS,EAC5C,OAAO,OAAO,OAAOC,EAAcH,CAAG,CAC1C,CACA,cAAO,QAAQA,CAAG,EAAE,QAAQ,CAAC,CAACf,EAAKG,CAAQ,IAAI,CAC3C,GAAI,OAAOA,GAAa,YAAc,CAACO,EAAUP,CAAQ,IACjD,CAACA,EAAS,WAAa,OAAO,KAAKA,EAAS,SAAS,EAAE,SAAW,GAAG,CACrE,MAAMJ,EAAOG,EAAeF,EAAKG,CAAQ,EACzC,GAAI,CACAY,EAAIf,CAAG,EAAID,CACf,MACM,CAAC,CACX,CAER,CAAC,EACMgB,CACX,EACAjB,EAAkB,CACd,WAAAa,gBACAG,EACA,oBAAAE,EACA,eAAAH,CACJ,CAAC"}